##name: PR Validation - Main Starter
##
##on:
##  pull_request:
##    types: [opened, edited, reopened, synchronize]
##
##permissions:
##  id-token: write
##  contents: read
##
##jobs:      
##  start_dev_workflow:
##    uses: ./.github/workflows/pr-validation-generic-env.yaml
##    secrets: inherit
##    with:
##      environment: dev
##  
##  diff_summary:
##    needs: [ start_dev_workflow ]
##    if: ${{ vars.ENABLE_KUBE_DIFF == 'true' }}
##    secrets: inherit
##    uses: ./.github/workflows/pr-validation-sub-print-summary.yaml
##    
name: PR Validation - Main Starter

on:
  pull_request:
    types: [opened, edited, reopened, synchronize]

permissions:
  id-token: write
  contents: read

jobs:
   validation:
     name: "Validation â€“ ${{ matrix.environment }}"
     secrets: inherit
     strategy:
       matrix:
         environment: [dev, qa, vapt]
     #  github action for validation in interop-infra-commons repo
     uses: pagopa/interop-infra-commons/.github/workflows/deployment-values-validation.yaml@main
     with:
       environment: ${{ matrix.environment }}

